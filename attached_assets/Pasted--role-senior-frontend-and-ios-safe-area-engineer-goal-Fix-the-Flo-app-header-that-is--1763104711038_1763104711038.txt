{
  "role": "senior_frontend_and_ios_safe_area_engineer",
  "goal": "Fix the Flo app header that is now being pushed under the iOS status bar / dynamic island after the overscroll-bounce fix. Ensure the top header sits immediately below the iOS safe-area and remains fully visible and interactive across all devices.",
  "problem": "After disabling iOS WKWebView bounce and updating backgrounds, the main header is now positioned at the absolute top of the screen, underneath the iOS status bar, making icons unclickable.",
  "expected_behavior": "The header should always sit BELOW the iOS top safe area (status bar/dynamic island) on all iPhones, without adding double spacing on Android or desktop.",
  "instructions": [
    {
      "id": "apply_safe_area_css",
      "description": "Add safe-area padding to the top of the header or global container.",
      "steps": [
        "In global CSS (or header component stylesheet), add:",
        "```css",
        ":root {",
        "  --safe-top: env(safe-area-inset-top);",
        "}",
        "body {",
        "  padding-top: var(--safe-top);",
        "}",
        "```",
        "OR if header has its own wrapper, apply directly:",
        "```css",
        ".app-header {",
        "  padding-top: env(safe-area-inset-top);",
        "}",
        "```",
        "Ensure fallback for devices without safe-area insets:",
        "```css",
        ".app-header {",
        "  padding-top: max(env(safe-area-inset-top), 12px);",
        "}",
        "```"
      ]
    },
    {
      "id": "avoid_double_padding",
      "description": "Prevent double-padding if the header already includes spacing.",
      "steps": [
        "Detect existing header padding.",
        "If the header currently uses fixed padding-top, replace it with:",
        "```css",
        "padding-top: calc(env(safe-area-inset-top) + 12px);",
        "```",
        "Remove any existing margin-top or negative positioning hacks."
      ]
    },
    {
      "id": "ios_specific_patch",
      "description": "Ensure the fix only applies to iOS when needed.",
      "steps": [
        "Use a CSS iOS-only media query if required:",
        "```css",
        "@supports (-webkit-touch-callout: none) {",
        "  .app-header {",
        "    padding-top: calc(env(safe-area-inset-top) + 12px);",
        "  }",
        "}",
        "```"
      ]
    },
    {
      "id": "test",
      "description": "Verify on multiple screen types.",
      "steps": [
        "Test on iPhone 15 Pro simulator.",
        "Test on iPhone SE simulator.",
        "Ensure header sits below the dynamic island / status bar.",
        "Ensure Android and desktop browsers show normal spacing."
      ]
    }
  ],
  "definition_of_done": [
    "The header is visible, not under the status bar.",
    "Icons are clickable and not hidden behind the dynamic island.",
    "The layout adapts to safe-area insets on any iPhone model.",
    "Android + desktop unaffected (no large unwanted spacing)."
  ]
}
